<div class="communication-assistant">
  <!-- Left panel: Settings controls -->
  <mat-card class="settings-panel">
    <mat-card-header>
      <mat-card-title>Settings</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="setting-group">
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Communication Style</mat-label>
          <mat-select 
            [(ngModel)]="selectedStyle" 
            (selectionChange)="onStyleChange()"
          >
            @for (style of communicationStyles; track style.id) {
              <mat-option [value]="style.id">{{ style.name }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>

      <div class="setting-group">
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Relationship Level</mat-label>
          <mat-select 
            [(ngModel)]="selectedRelationship" 
            (selectionChange)="onRelationshipChange()"
          >
            @for (level of relationshipLevels; track level.id) {
              <mat-option [value]="level.id">{{ level.name }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>

      <div class="setting-group">
        <mat-checkbox 
          [(ngModel)]="enablePyramidalStructuring" 
          (change)="onPyramidalStructuringChange()"
        >
          Enable Pyramidal Structuring
        </mat-checkbox>
        <p class="setting-description">
          Organizes content in a hierarchical structure for better readability
        </p>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Middle panel: Text display and actions -->
  <div class="text-panel">
    <mat-card>
      <mat-card-content>
        <!-- Tabs for Draft/Original -->
        <mat-tab-group [selectedIndex]="activeTab === 'draft' ? 0 : 1" (selectedIndexChange)="onTabChange($event === 0 ? 'draft' : 'original')">
          <mat-tab label="Draft">
            <mat-form-field appearance="fill" class="full-width text-area-container">
              <textarea 
                matInput
                [(ngModel)]="draftText" 
                (input)="onTextChange()"
                placeholder="Your processed text will appear here..."
                rows="10"
              ></textarea>
            </mat-form-field>
          </mat-tab>
          <mat-tab label="Original">
            <mat-form-field appearance="fill" class="full-width text-area-container">
              <textarea 
                matInput
                [(ngModel)]="originalText" 
                (input)="onTextChange()"
                placeholder="Enter or paste your text here..."
                rows="10"
              ></textarea>
            </mat-form-field>
          </mat-tab>
        </mat-tab-group>

        <!-- Action buttons -->
        <div class="action-buttons">
          <button mat-raised-button color="primary" (click)="processText('concise')">Make Concise</button>
          <button mat-raised-button color="primary" (click)="processText('expand')">Add Detail</button>
          <button mat-raised-button color="primary" (click)="processText('persuasive')">Make Persuasive</button>
          <button mat-raised-button color="primary" (click)="processText('neutral')">Make Neutral</button>
          <button mat-raised-button color="primary" (click)="processText('diplomatic')">Make Diplomatic</button>
          <button mat-raised-button color="primary" (click)="processText('direct')">Make Direct</button>
          <button mat-raised-button color="primary" (click)="processText('casual')">Make Casual</button>
          <button mat-raised-button color="primary" (click)="processText('professional')">Make Professional</button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Right panel: History -->
  <mat-card class="history-panel">
    <mat-card-header>
      <mat-card-title>History</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="history-view">
        <p>History view will be implemented in a future update.</p>
      </div>
    </mat-card-content>
  </mat-card>
</div>
